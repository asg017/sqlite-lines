on: [push]
name: "build"
jobs:
  build:
    name: Build for ${{ matrix.os }}
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        include:
          - os: ubuntu-latest
            asset: lines0-linux-amd64.zip
          - os: macos-latest
            asset: lines0-darwin-amd64.zip

    steps:
      - uses: actions/checkout@v2
      - name: Build
        env:
          ENV: CI
        run: |
          mkdir -p dist/
          make dist/package.zip
          make test
      - name: distribution
        uses: actions/upload-artifact@v2
        with:
          name: ${{matrix.asset}}
          path: dist/package.zip
